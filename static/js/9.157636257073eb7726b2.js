webpackJsonp([9],{212:function(e,a,t){t(532);var r=t(94)(t(408),t(558),null,null);e.exports=r.exports},234:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t(57),n=t.n(r),s=t(56),i=t.n(s),l=t(58),o=t.n(l),c=t(95),d=t(96),u=t(97);a.default={data:function(){return{baseImgPath:d.b}},created:function(){},computed:o()({},t.i(u.b)(["adminInfo"])),methods:o()({},t.i(u.c)(["getAdminData"]),{handleCommand:function(e){var a=this;return i()(n.a.mark(function r(){var s;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if("home"!=e){r.next=4;break}a.$router.push("/manage"),r.next=9;break;case 4:if("signout"!=e){r.next=9;break}return r.next=7,t.i(c.g)();case 7:s=r.sent,1==s.status?(a.$message({type:"success",message:"退出成功"}),a.$router.push("/")):a.$message({type:"error",message:s.message});case 9:case"end":return r.stop()}},r,a)}))()}})}},235:function(e,a,t){a=e.exports=t(206)(!1),a.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.header_container{background-color:#eff2f7;height:60px;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;padding-left:20px}.avator{width:36px;height:36px;border-radius:50%;margin-right:37px}.el-dropdown-menu__item{text-align:center}",""])},236:function(e,a,t){var r=t(235);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t(207)("019239ba",r,!0)},237:function(e,a,t){t(236);var r=t(94)(t(234),t(238),null,null);e.exports=r.exports},238:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"header_container"},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/manage"}}},[e._v("首页")]),e._v(" "),e._l(e.$route.meta,function(a,r){return t("el-breadcrumb-item",{key:r},[e._v(e._s(a))])})],2)],1)},staticRenderFns:[]}},408:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t(59),n=t.n(r),s=t(58),i=t.n(s),l=t(57),o=t.n(l),c=t(56),d=t.n(c),u=t(237),m=t.n(u),p=t(95);a.default={data:function(){return{dynamicDiaTitle:"新增奖励信息",dynamicState:0,tableData:[],currentRow:null,offset:0,limit:10,count:0,currentPage:1,dialogFormVisible:!1,awardFileList:[],awardForm:{awardId:null,awardTitle:"",awardName:""},searchForm:{category:"",awardTitle:"",awardName:""},rules:{awardTitle:[{required:!0,message:"请输入比赛/会议名称",trigger:"blur"},{required:!0,message:"请输入比赛/会议名称",trigger:"change"}],awardName:[{required:!0,message:"请输入奖励名称",trigger:"blur"},{required:!0,message:"请输入奖励名称",trigger:"change"}],category:[{required:!0,message:"请输入获奖类别",trigger:"blur"},{required:!0,message:"请输入获奖类别",trigger:"change"}]}}},components:{headTop:m.a},created:function(){this.initData()},methods:{handleSearch:function(){var e=this;return d()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.getAwards();case 1:case"end":return a.stop()}},a,e)}))()},handleReset:function(){this.searchForm={category:"",awardTitle:"",awardName:""},this.handleSearch()},getAwards:function(){var e=this;return d()(o.a.mark(function a(){var r,n;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.tableData=[],a.prev=1,r=i()({},e.searchForm,{page:e.currentPage-1,size:e.limit}),a.next=5,t.i(p.o)(r);case 5:n=a.sent,e.count=n.awardCount,e.tableData=[],n.awardDetailList.length>0&&n.awardDetailList.forEach(function(a){var t={};t.id=a.awardId,t.category=a.category,t.awardName=a.awardName,t.awardTitle=a.awardTitle,t.award_attachments_details=a.award_attachments_details,e.tableData.push(t)}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),console.log("获取数据失败",a.t0);case 14:case"end":return a.stop()}},a,e,[[1,11]])}))()},initData:function(){var e=this;return d()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.getAwards();case 1:case"end":return a.stop()}},a,e)}))()},handleSizeChange:function(e){this.currentPage=1,this.limit=e,this.offset=(this.currentPage-1)*e,this.getAwards()},handleCurrentChange:function(e){this.currentPage=e,this.offset=(e-1)*this.limit,this.getAwards()},resetawardForm:function(){this.awardForm={awardId:null,awardTitle:"",awardName:""},this.awardFileList=[]},handleCreate:function(){if(0===this.dynamicState)return void(this.dialogFormVisible=!0);this.dynamicState=0,this.dynamicDiaTitle="新增奖励信息",this.resetawardForm(),this.dialogFormVisible=!0},handleEdit:function(e,a){var t=this;return d()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.dynamicState=1,t.dynamicDiaTitle="编辑奖励信息",t.resetawardForm(),t.awardForm.awardId=a.id,t.awardForm.awardTitle=a.awardTitle,t.awardForm.awardName=a.awardName,t.awardForm.category=a.category,a.award_attachments_details.length>0&&a.award_attachments_details.forEach(function(e){var a={};a.name=e.attachmentName,a.url=e.attachmentUrl,t.awardFileList.push(a)}),t.dialogFormVisible=!0;case 9:case"end":return e.stop()}},e,t)}))()},handleDelete:function(e,a){var r=this;return d()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.i(p.p)({awardId:a.id});case 3:if(n=e.sent,1!=n.status){e.next=9;break}r.$message({type:"success",message:"删除奖励成功"}),r.getAwards(),e.next=10;break;case 9:throw new Error(n.message);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),r.$message({type:"error",message:e.t0.message}),console.log("删除奖励失败");case 16:case"end":return e.stop()}},e,r,[[0,12]])}))()},createAward:function(){var e=this;return d()(o.a.mark(function a(){var r,s,l,c,d;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,new n.a(function(a){e.$refs.awardForm.validate(function(e){a(e)})});case 3:if(!(r=a.sent)){a.next=20;break}if(0!=e.dynamicState){a.next=13;break}return s=i()({},e.awardForm,{awardFileList:e.awardFileList.map(function(e){return{attachmentUrl:e.url,attachmentName:e.name}})}),a.next=9,t.i(p.q)(s);case 9:l=a.sent,1==l.status?(e.$message({type:"success",message:"创建奖励成功！"}),e.dialogFormVisible=!1,e.resetawardForm(),e.getAwards()):(e.$message({type:"error",message:l.message}),e.dialogFormVisible=!1),a.next=18;break;case 13:return c=i()({},e.awardForm,{awardFileList:e.awardFileList.map(function(e){return{attachmentUrl:e.url,attachmentName:e.name}})}),a.next=16,t.i(p.r)(c);case 16:d=a.sent,1==d.status?(e.$message({type:"success",message:"更新奖励信息成功！"}),e.dialogFormVisible=!1,e.resetawardForm(),e.getAwards()):(e.$message({type:"error",message:d.message}),e.dialogFormVisible=!1);case 18:a.next=21;break;case 20:e.$message({type:"error",message:"表单验证未通过，请检查输入内容！"});case 21:a.next=26;break;case 23:a.prev=23,a.t0=a.catch(0),console.log("创建奖励信息失败！",a.t0);case 26:case"end":return a.stop()}},a,e,[[0,23]])}))()},handleAwardsUploadSuccess:function(e,a,t){var r=e.url,n=e.fileName;r&&this.awardFileList.push({name:n,url:r})},handleAwardsRemove:function(e,a){var r=this;return d()(o.a.mark(function a(){var n,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.i(p.c)({fileUrl:e.url});case 2:n=a.sent,1==n.status&&-1!==(s=r.awardFileList.findIndex(function(a){return a.url===e.url}))&&r.awardFileList.splice(s,1);case 4:case"end":return a.stop()}},a,r)}))()},handleExceed:function(e,a){this.$message.warning("最多上传20个文件")},beforeRemove:function(e,a){return this.$confirm("确定移除 "+e.name+"？")}}}},437:function(e,a,t){a=e.exports=t(206)(!1),a.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}.table_container{padding:20px}",""])},532:function(e,a,t){var r=t(437);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t(207)("4228bf6a",r,!0)},558:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"fillcontain"},[t("head-top"),e._v(" "),t("div",{staticStyle:{"margin-top":"20px"}},[t("el-form",{staticClass:"search-form",attrs:{inline:!0,model:e.searchForm,"label-width":"140px"}},[t("el-form-item",{attrs:{label:"获奖类别"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择申请状态"},model:{value:e.searchForm.category,callback:function(a){e.$set(e.searchForm,"category",a)},expression:"searchForm.category"}},[t("el-option",{attrs:{label:"个人/团队获奖",value:"个人/团队获奖"}}),e._v(" "),t("el-option",{attrs:{label:"指导学生获奖",value:"指导学生获奖"}}),e._v(" "),t("el-option",{attrs:{label:"其他获奖",value:"其他获奖"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"比赛/会议名称包含"}},[t("el-input",{staticStyle:{width:"400px"},attrs:{clearable:"",placeholder:"请输入比赛/会议名称需要包含的内容"},model:{value:e.searchForm.awardTitle,callback:function(a){e.$set(e.searchForm,"awardTitle",a)},expression:"searchForm.awardTitle"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"奖励名称包含"}},[t("el-input",{staticStyle:{width:"400px"},attrs:{clearable:"",placeholder:"请输入奖励名称需要包含的内容"},model:{value:e.searchForm.awardName,callback:function(a){e.$set(e.searchForm,"awardName",a)},expression:"searchForm.awardName"}})],1),e._v(" "),t("el-form-item",[t("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",plain:""},on:{click:e.handleSearch}},[t("i",{staticClass:"el-icon-search"}),e._v(" 搜索\n            ")]),e._v(" "),t("el-button",{staticStyle:{width:"100px"},attrs:{type:"info",plain:""},on:{click:e.handleReset}},[t("i",{staticClass:"el-icon-refresh-left"}),e._v(" 重置\n            ")]),e._v(" "),t("el-button",{staticStyle:{width:"300px"},attrs:{type:"success",plain:""},on:{click:e.handleCreate}},[t("i",{staticClass:"el-icon-plus"}),e._v(" 新增获奖\n            ")])],1)],1)],1),e._v(" "),t("div",{staticClass:"table_container"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"highlight-current-row":""}},[t("el-table-column",{attrs:{property:"id",label:"奖励数据ID",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{property:"awardTitle",label:"比赛/会议名称","min-width":"200"}}),e._v(" "),t("el-table-column",{attrs:{property:"awardName",label:"奖励名称","min-width":"100"}}),e._v(" "),t("el-table-column",{attrs:{property:"category",label:"奖励分类","min-width":"100"}}),e._v(" "),t("el-table-column",{attrs:{label:"获奖附件","min-width":"300"},scopedSlots:e._u([{key:"default",fn:function(a){return[Array.isArray(a.row.award_attachments_details)&&a.row.award_attachments_details.length>0?t("div",{staticStyle:{display:"flex","flex-wrap":"wrap","align-items":"center"}},e._l(a.row.award_attachments_details,function(a,r){return t("a",{key:r,staticStyle:{color:"#409eff","text-decoration":"underline","margin-right":"10px","margin-bottom":"10px"},attrs:{href:"http://47.122.131.74:8080/api/file/preview/"+a.attachmentName,target:"_blank",rel:"noopener noreferrer"}},[e._v("\n                    "+e._s(a.attachmentName)+" ")])}),0):t("span",[e._v("未上传附件")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleEdit(a.$index,a.row)}}},[e._v("编辑")]),e._v(" "),t("el-popconfirm",{attrs:{title:"确定要删除这个专利吗？","confirm-button-text":"确定","cancel-button-text":"取消"},on:{confirm:function(t){return e.handleDelete(a.$index,a.row)}}},[t("el-button",{attrs:{slot:"reference",size:"small",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),e._v(" "),t("div",{staticClass:"Pagination"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(a){e.currentPage=a},"update:current-page":function(a){e.currentPage=a}}})],1)],1),e._v(" "),t("el-dialog",{attrs:{width:"25%",title:e.dynamicDiaTitle,visible:e.dialogFormVisible},on:{"update:visible":function(a){e.dialogFormVisible=a}}},[t("el-form",{ref:"awardForm",attrs:{model:e.awardForm,rules:e.rules}},[1===e.dynamicState?t("el-form-item",{attrs:{label:"奖励数据ID","label-width":"120px"}},[t("el-input",{attrs:{disabled:!0,placeholder:"自动生成的奖励数据ID"},model:{value:e.awardForm.awardId,callback:function(a){e.$set(e.awardForm,"awardId",a)},expression:"awardForm.awardId"}})],1):e._e(),e._v(" "),t("el-form-item",{attrs:{required:"",label:"获奖类别",prop:"category","label-width":"120px"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择获奖类别"},model:{value:e.awardForm.category,callback:function(a){e.$set(e.awardForm,"category",a)},expression:"awardForm.category"}},[t("el-option",{attrs:{label:"个人/团队获奖",value:"个人/团队获奖"}}),e._v(" "),t("el-option",{attrs:{label:"指导学生获奖",value:"指导学生获奖"}}),e._v(" "),t("el-option",{attrs:{label:"其他获奖",value:"其他获奖"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{required:"",label:"比赛/会议名称",prop:"awardTitle","label-width":"120px"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入比赛/会议名称","auto-complete":"off"},model:{value:e.awardForm.awardTitle,callback:function(a){e.$set(e.awardForm,"awardTitle",a)},expression:"awardForm.awardTitle"}})],1),e._v(" "),t("el-form-item",{attrs:{required:"",label:"奖励名称",prop:"awardName","label-width":"120px"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入奖励名称","auto-complete":"off"},model:{value:e.awardForm.awardName,callback:function(a){e.$set(e.awardForm,"awardName",a)},expression:"awardForm.awardName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"该获奖相关附件","label-width":"120px"}},[t("el-upload",{staticClass:"upload-demo",attrs:{action:"http://47.122.131.74:8080/api/file/upload/",multiple:!1,limit:20,"on-remove":e.handleAwardsRemove,"before-remove":e.beforeRemove,"on-exceed":e.handleExceed,"on-success":e.handleAwardsUploadSuccess,"file-list":e.awardFileList}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.createAward}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}}});